<!--Modal para para cadastrar requerimento -->
<div class="modal fade" id="addRequerimentoModal" tabindex="-1" aria-labelledby="addRequerimentoModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header alert-success">
        <i class="bi-ticket" style="font-size: 1.5rem; margin-right: 8px; vertical-align: bootom; padding-bootom: 0px; color: firebrike;"></i>
        <h5 class="modal-title" id="add-label-title">Cadastrar Requerimento</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form id="urlAddRequrimentoBt" action="" method="post">
        <div class="modal-body">
          <div class="container">
            <div class="row">
              <div class="col-sm-3" id="delail_data_abertura"></div>
              <div class="col-sm-3" id="delail_statusdoatendimento"></div>
              <div class="col-sm-6" id="delail_descricao"></div>
            </div>
            <div class="row">
              <div class="col-sm-1" id="delail_UsuarioContatoId"></div>
              <div class="col-sm-4" id="delail_UsuarioContatoNome"></div>
              <div class="col-sm-3" id="delail_UsuarioContatoEmail"></div>
              <div class="col-sm-2" id="delail_UsuarioContatoTelefone"></div>
              <div class="col-sm-1" id="delail_UsuarioContatoSiglaDep"></div>
              <div class="col-sm-1" id="delail_UsuarioContatoSala"></div>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="recipient-atendimento" class="small-label col-form-label col-md-12 mb-0 p-0">Atendimento: </label>
              <select name="atendimento" required value="" class="form-select form-select-sm" id="recipient-atendimento">
                <option value=''>Selecione o Atendimento</option>
                {{optionsBuscaAtendimento}}
              </select>
              <input type="hidden" name="atendente" value="{{idUsuarioLogado}}" id="recipient-atendente">
              <input type="hidden" name="chamado" value="" id="recipient-chamado">
            </div>
            <div class="form-group col-md-6">
              <label for="recipient-usuario-atendido" class="small-label col-form-label col-md-12 mb-0 p-0">Usuário para o qual se destina o atendimento: </label>
              <select name="usuario-atendido" required value="" class="form-select form-select-sm" id="recipient-usuario-atendido">
                <option value=''>Selecione o Usuário</option>
                {{optionsBuscaUsuario}}
              </select>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-md-4">
              <label for="recipient-urgencia" class="small-label col-form-label col-md-12 mb-0 p-0">Urgência: </label>
              <select name="urgencia" required value="" class="form-select form-select-sm" id="recipient-urgencia">
                <option value=''>Selecione a Urgência</option>
                {{optionsBuscaUrgencia}}
              </select>
            </div>
            <div class="form-group col-md-4">
              <label for="recipient-criticidade" class="small-label col-form-label col-md-12 mb-0 p-0">Criticidade: </label>
              <select name="criticidade" required value="" class="form-select form-select-sm" id="recipient-criticidade">
                <option value=''>Selecione a Criticidade</option>
                {{optionsBuscaCriticidade}}
              </select>
            </div>
            <div class="form-group col-md-4">
              <label for="recipient-tipodeocorrencia" class="small-label col-form-label col-md-12 mb-0 p-0">Tipo de ocorrência: </label>
              <select name="tipodeocorrencia" required value="" class="form-select form-select-sm" id="recipient-tipodeocorrencia">
                <option value=''>Selecione o Tipo de ocorrência</option>
                {{optionsBuscaTipodeOcorrencia}}
              </select>
            </div>
          </div>


          <!-- IMPEMENTAÇÃO FUTURA
          <div class="form-row">
            <div class="form-group col-md-3">
              <label for="recipient-tipodeic" class="small-label col-form-label col-md-12 mb-0 p-0">Tipo de Serviço: </label>
              <select name="tipodeic" required value="" class="form-select form-select-sm" id="recipient-tipodeic">
                <option value=''>Selecione o Tipo de Serviço</option>
                {{optionsBuscaTipoDeServico}}
              </select>
            </div>
            <div class="form-group col-md-3">
              <label for="recipient-tipodeic" class="small-label col-form-label col-md-12 mb-0 p-0">Serviço: </label>
              <select name="tipodeic" required value="" class="form-select form-select-sm" id="recipient-tipodeic">
                <option value=''>Selecione o Serviço</option>
                {{optionsBuscaServico}}
              </select>
            </div>
            <div class="form-group col-md-3">
              <label for="recipient-tipodeic" class="small-label col-form-label col-md-12 mb-0 p-0">Tipo de Item: </label>
              <select name="tipodeic" required value="" class="form-select form-select-sm" id="recipient-tipodeic">
                <option value=''>Selecione o Tipo de Item</option>
                {{optionsBuscaTipodeic}}
              </select>
            </div>
            <div class="form-group col-md-3">
              <label for="recipient-tipodeic" class="small-label col-form-label col-md-12 mb-0 p-0">Usuário: </label>
              <select name="tipodeic" required value="" class="form-select form-select-sm" id="recipient-tipodeic">
                <option value=''>Selecione o Usuário</option>
                {{optionsBuscaUsuario}}
              </select>
            </div>
          </div>-->
          <div class="form-row">
            <div class="form-group col-md-3">
              <label for="recipient-status" class="small-label col-form-label col-md-12 mb-0 p-0">Status: </label>
              <select name="status" required value="" class="form-select form-select-sm" id="recipient-status">
                <option value=''>Selecione o Status</option>
                {{optionsBuscaStatus}}
              </select>
            </div>
            <div class="form-group col-md-3">
              <label for="recipient-nrdgtec" class="small-label col-form-label col-md-12 mb-0 p-0">Número da DGTEC: </label>
              <input type="text" class="form-control form-control-sm" name="nrdgtec" maxlength="20" value="" id="recipient-nrdgtec">
            </div>
            <div class="form-group col-md-6">
              <label for="recipient-usuario-autorizador" class="small-label col-form-label col-md-12 mb-0 p-0">Usuário Autorizador: </label>
              <select name="usuario-autorizador" value="" class="form-select form-select-sm" id="recipient-usuario-autorizador">
                <option value=''>Selecione o Usuário Autorizador</option>
                {{optionsBuscaUsuario}}
              </select>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-md-12">
              <label for="recipient-desc" class="small-label col-form-label col-md-12 mb-0 p-0">Obs: </label>
              <textarea class="form-control" name="descricao" value="" rows="5" maxlength="5000" id="recipient-desc"></textarea>
            </div>
          </div>


      <!--
      <div class="container">
        <div class="row">
          <div class="col-sm-6" id="delail_titulo"></div>
          <div class="col-sm-6" id="delail_data_abertuta"></div>
        </div>
        <div class="row">
          <div class="col-sm-1" id="delail_UsuarioContatoId"></div>
          <div class="col-sm-4" id="delail_UsuarioContatoNome"></div>
          <div class="col-sm-3" id="delail_UsuarioContatoEmail"></div>
          <div class="col-sm-2" id="delail_UsuarioContatoTelefone"></div>
          <div class="col-sm-1" id="delail_UsuarioContatoSiglaDep"></div>
          <div class="col-sm-1" id="delail_UsuarioContatoSala"></div>
        </div>
        <div class="row">
          <div class="col-sm-12" id="delail_descricao"></div>
        </div>
        <div class="row">
          <div class="col-sm-1" id="delail_UsuarioSolicitanteId"></div>
          <div class="col-sm-4" id="delail_UsuarioSolicitanteNome"></div>
          <div class="col-sm-3" id="delail_UsuarioSolicitanteEmail"></div>
          <div class="col-sm-2" id="delail_UsuarioSolicitanteTelefone"></div>
          <div class="col-sm-1" id="delail_UsuarioSolicitanteSiglaDep"></div>
          <div class="col-sm-1" id="delail_UsuarioSolicitanteSala"></div>
        </div>
        <div class="row">
          <div class="col-sm-1" id="delail_UsuarioAtendidoId"></div>
          <div class="col-sm-4" id="delail_UsuarioAtendidoNome"></div>
          <div class="col-sm-3" id="delail_UsuarioAtendidoEmail"></div>
          <div class="col-sm-2" id="delail_UsuarioAtendidoTelefone"></div>
          <div class="col-sm-1" id="delail_UsuarioAtendidoSiglaDep"></div>
          <div class="col-sm-1" id="delail_UsuarioAtendidoSala"></div>
        </div>
        <div class="row">
          <div class="col-sm-1" id="delail_UsuarioAutorizadorId"></div>
          <div class="col-sm-4" id="delail_UsuarioAutorizadorNome"></div>
          <div class="col-sm-3" id="delail_UsuarioAutorizadorEmail"></div>
          <div class="col-sm-2" id="delail_UsuarioAutorizadorTelefone"></div>
          <div class="col-sm-1" id="delail_UsuarioAutorizadorSiglaDep"></div>
          <div class="col-sm-1" id="delail_UsuarioAutorizadorSala"></div>
        </div>
        <div class="row">
          <div class="col-sm-1" id="delail_UsuarioAtendenteId"></div>
          <div class="col-sm-4" id="delail_UsuarioAtendenteNome"></div>
          <div class="col-sm-3" id="delail_UsuarioAtendenteEmail"></div>
          <div class="col-sm-2" id="delail_UsuarioAtendenteTelefone"></div>
          <div class="col-sm-1" id="delail_UsuarioAtendenteSiglaDep"></div>
          <div class="col-sm-1" id="delail_UsuarioAtendenteSala"></div>
        </div>
        <div class="row">
          <div class="col-sm-4" id="delail_dataAtendimento"></div>
          <div class="col-sm-4" id="delail_nrSolicitacao"></div>
          <div class="col-sm-4" id="delail_nrRequisicao"></div>
        </div>
        <div class="row">
          <div class="col-sm-12" id="delail_chamadoObs"></div>
        </div>
        <div class="row">
          <div class="col-sm-4" id="delail_idStatus"></div>
          <div class="col-sm-4" id="delail_idChamadoPai"></div>
          <div class="col-sm-4" id="delail_statusdoatendimento"></div>
        </div>

      </div>
        -->
      <div class="modal-footer col-mb-12">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="submit" class="btn btn-primary" id="add-button" name="button">Cadastrar Requisição</button>
      </div>
    </div>
  </form>

  </div>
</div>
<script type="text/javascript">
    $(document).ready(function() {
        $('#recipient-atendimento').select2({
          dropdownParent: $('#addRequerimentoModal')
        });
        $('#recipient-usuario-atendido').select2({
          dropdownParent: $('#addRequerimentoModal')
        });
    });

    var addRequerimentoModal = document.getElementById('addRequerimentoModal')
    addRequerimentoModal.addEventListener('show.bs.modal', function (event) {
    // Button that triggered the modal
    var button = event.relatedTarget
    // Informação extraída dos atributos do data-bs-* no botão (item.html)
    var recipientURL = button.getAttribute('data-bs-whatever-url')
    var recipientURI = button.getAttribute('data-bs-whatever-uri')
    var recipientDIR = button.getAttribute('data-bs-whatever-dir')
    var recipientId = button.getAttribute('data-bs-whatever-id')
    var recipientDescricao = button.getAttribute('data-bs-whatever-descricao')
    var recipientTitle = button.getAttribute('data-bs-whatever-title')
    var recipientnrSolicitacao = button.getAttribute('data-bs-whatever-nrSolicitacao')
    var recipientDataAbertura = button.getAttribute('data-bs-whatever-data_abertura')

    var recipientUsuarioContatoId = button.getAttribute('data-bs-whatever-UsuarioContatoId')
    var recipientUsuarioContatoNome = button.getAttribute('data-bs-whatever-UsuarioContatoNome')
    var recipientUsuarioContatoEmail = button.getAttribute('data-bs-whatever-UsuarioContatoEmail')
    var recipientUsuarioContatoTelefone = button.getAttribute('data-bs-whatever-UsuarioContatoTelefone')
    var recipientUsuarioContatoSiglaDep = button.getAttribute('data-bs-whatever-UsuarioContatoSiglaDep')
    var recipientUsuarioContatoSala = button.getAttribute('data-bs-whatever-UsuarioContatoSala')

    var recipientstatusdoatendimento = button.getAttribute('data-bs-whatever-statusdoatendimento')

///////////////////////////////////////////////////////////////

    var modalURL = addRequerimentoModal.querySelector('#urlAddRequrimentoBt')
    var modalTitle = addRequerimentoModal.querySelector('#add-label-title')
    var modalDescricao = addRequerimentoModal.querySelector('#delail_descricao')
    var modalDataAbertura = addRequerimentoModal.querySelector('#delail_data_abertura')

    var modalUsuarioContatoId = addRequerimentoModal.querySelector('#delail_UsuarioContatoId')
    var modalUsuarioContatoNome = addRequerimentoModal.querySelector('#delail_UsuarioContatoNome')
    var modalUsuarioContatoEmail = addRequerimentoModal.querySelector('#delail_UsuarioContatoEmail')
    var modalUsuarioContatoTelefone = addRequerimentoModal.querySelector('#delail_UsuarioContatoTelefone')
    var modalUsuarioContatoSiglaDep = addRequerimentoModal.querySelector('#delail_UsuarioContatoSiglaDep')
    var modalUsuarioContatoSala = addRequerimentoModal.querySelector('#delail_UsuarioContatoSala')

    var modalChamado= addRequerimentoModal.querySelector('#recipient-chamado')
    var modalAtendente = addRequerimentoModal.querySelector('#recipient-atendente')

    var modalstatusdoatendimento = addRequerimentoModal.querySelector('#delail_statusdoatendimento')


    modalTitle.textContent = 'Cadastrar '+recipientTitle+' para o chamado '+recipientnrSolicitacao
    modalDescricao.textContent = 'Descrição: '+recipientDescricao
    modalDataAbertura.textContent = 'Data da abertura: '+recipientDataAbertura

    modalUsuarioContatoId.textContent = 'id: '+recipientUsuarioContatoId
    modalUsuarioContatoNome.textContent = 'Nome: '+recipientUsuarioContatoNome
    modalUsuarioContatoEmail.textContent = 'Email: '+recipientUsuarioContatoEmail
    modalUsuarioContatoTelefone.textContent = 'Tel: '+recipientUsuarioContatoTelefone
    modalUsuarioContatoSiglaDep.textContent = recipientUsuarioContatoSiglaDep
    modalUsuarioContatoSala.textContent = recipientUsuarioContatoSala

    modalChamado.value = recipientId

    modalstatusdoatendimento.textContent = 'Status do Atendimento: '+recipientstatusdoatendimento

    modalURL.action = recipientURL+'/admin/'+recipientDIR+'/novo'

  })
</script>
