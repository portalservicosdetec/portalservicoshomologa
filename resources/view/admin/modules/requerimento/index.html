
<div class="row align-items-end">
  <div class="col-md-3">
    <h5 class="card-title"><i class="bi-{{icon}}" style="font-size: 2rem; margin-right: 8px; vertical-align: bootom; padding-bootom: 0px; color: dimgray;"></i>{{title}}</h5>
  </div>
  <div class="col-md-6 d-flex justify-content-center">
    <a href="{{URL}}/admin/{{direntity}}/novo" type="button" class="btn btn-sm btn-primary float-sm-right h4"><i class="bi-plus-lg" style="font-size: 1.rem; max-height:15px; margin-right: 5px; color: white;"></i>Cadastrar {{title}}</a>
  </div>
  <div class="col-md-3">
  </div>
</div>

{{status}}
<table id="data-table-requerimentos" class="table table-sm table-light table-hover table-striped">
  <thead>
      <tr>

        <th>Descrição</th>
        <th>Atendimento</th>
        <th>#Ticket</th>
        <th>Requisitante</th>
        <th>Data da alteração</th>
        <th>Status</th>
        <th><div class="d-flex justify-content-center">Ações</div></th>
      </tr>
  </thead>
  <tbody>
    {{itens}}
  </tbody>
</table>
<script type="text/javascript">
  $(document).ready(function() {
    var groupColumn = 2; //Apagar esta linha e as linhas de 33 a 52 e 64 a 73.
    var table = $('#data-table-requerimentos').DataTable({
      "columnDefs": [
            { "visible": false, "targets": groupColumn }
        ],
        "order": [[ groupColumn, 'asc' ]],
        "displayLength": 25,
        "drawCallback": function ( settings ) {
            var api = this.api();
            var rows = api.rows( {page:'current'} ).nodes();
            var last=null;

            api.column(groupColumn, {page:'current'} ).data().each( function ( group, i ) {
                if ( last !== group ) {
                    $(rows).eq( i ).before(
                        '<tr class="group"><td colspan="6"><h4>'+group+'</h4></td></tr>'
                    );

                    last = group;
                }
            } );
          },

      "bStateSave": true,
      "fnStateSave": function (oSettings, oData) {
        localStorage.setItem('offersDataTables', JSON.stringify(oData));
      },
      "fnStateLoad": function (oSettings) {
        return JSON.parse(localStorage.getItem('offersDataTables'));
      },
      "language": { "url": "//cdn.datatables.net/plug-ins/1.11.1/i18n/pt_br.json" },
    });

    // Order by the grouping
    $('#data-table-requerimentos tbody').on( 'click', 'tr.group', function () {
        var currentOrder = table.order()[0];
        if ( currentOrder[0] === groupColumn && currentOrder[1] === 'asc' ) {
            table.order( [ groupColumn, 'desc' ] ).draw();
        }
        else {
            table.order( [ groupColumn, 'asc' ] ).draw();
        }
    });
  });
</script>
